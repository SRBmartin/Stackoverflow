<div class="overlay" (click)="close()"></div>

<div class="dialog" role="dialog" aria-modal="true">
  <h2>Ask a question</h2>

  <form (ngSubmit)="submit()">
    <div class="form-group">
      <label>Title</label>
      <input 
        type="text" 
        [(ngModel)]="title" 
        name="title" 
        [class.invalid]="titleError"
      />
      <div *ngIf="titleError" class="error-message">{{ titleError }}</div>
    </div>

    <div class="form-group">
      <label>Description</label>
      <textarea 
        [(ngModel)]="description" 
        name="description" 
        rows="4" 
        [class.invalid]="descriptionError"
      ></textarea>
      <div *ngIf="descriptionError" class="error-message">{{ descriptionError }}</div>
    </div>

    <div class="photo-upload-container">
      <div 
        *ngIf="!file"
        class="upload-dropzone" 
        (click)="fileInput.click()" 
        (dragover)="$event.preventDefault()"
        (drop)="onFileSelected($event)"
        [class.invalid]="fileError">
        Click or drag image to upload
      </div>
      <div *ngIf="fileError" class="error-message">{{ fileError }}</div>

      <input 
        #fileInput 
        type="file" 
        style="display:none" 
        (change)="onFileSelected($event)" />

      <div *ngIf="file" class="photo-preview-wrapper">
        <img [src]="filePreviewUrl" alt="Preview" />
        <button type="button" class="remove-photo-btn" (click)="removeFile()">Ã—</button>
      </div>
    </div>

    <div class="actions">
      <button type="submit">Submit</button>
      <button type="button" (click)="close()">Cancel</button>
    </div>
  </form>
</div>
